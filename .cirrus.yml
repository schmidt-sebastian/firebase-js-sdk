container:
  image: circleci/node:10-browsers
  cpu: 8
  memory: 24

check_task:
  node_modules_cache:
    folder: node_modules
    fingerprint_script: cat yarn.lock
    populate_script: yarn install
  config_script: cp config/ci.config.json config/project.json
  build_script: yarn build
  lsof_script: sudo apt-get install lsof
  matrix:
    - name: Node.js and Browser (Chrome) Test
      test_script: xvfb-run yarn test
      coveralls_script: yarn test:coverage
    - name: Cross Browser Test for SDKs
      test_script: yarn test:saucelabs